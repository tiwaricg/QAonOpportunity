<apex:page controller="Trek_QAOnOpportunityController" action="{!fetchQuestionAndAnswerOppProduct}">
	<apex:form >
		<style>
		</style>
		<apex:outputpanel id="optId">
		<apex:pageblock >
			<div style="margin-left: 31px;">
				<span style="font-size: 17px;font-weight: bold;">QA on Opportunity&nbsp;{!strOpportunityName}</span><br/>
				<hr/>
				<div style="margin-top: 16px;">
					<span style="color: chocolate;font-weight: bold;">Total answered questions : &nbsp;{!intTotalAnsQues}</span><br/><br/>
					<span style="color: chocolate;font-weight: bold;">Total unanswered questions : &nbsp;{!intTotalUnAnsQues}</span>
				</div>
				
				<div style="margin-top: 25px;">
					<table style="width: 75%;">
						<apex:variable var="count" value="{!2}"/>
						<apex:repeat value="{!lstQuestionsAnswerWrapperToGroup}" var="qa">
							<tr>
								<td colspan="3"><span style="color: black;font-weight: bold;font-size: 15px;">{!qa.strProduct}<hr /></span></td>
							</tr>
							<apex:variable var="i" value="{!1}"/>
							<apex:repeat value="{!qa.lstQuestionsAnswerWrapper}" var="queAns">
								<tr>
									<td style="vertical-align: middle;"><div style="color: chocolate;font-weight: bold;">Ques:&nbsp;{!i}</div></td>
									<td style="vertical-align: middle;"><div ><apex:outputText value="{!queAns.objQues.Ques__c}" id="queOpTextId" style="font-weight: bold;"/></div></td>
								</tr>
								<tr>
									<td style="vertical-align: middle;"><div style="color: chocolate;font-weight: bold;margin-bottom: 10px">Ans:&nbsp;</div></td>
									<td>
											<div>
											<span>{!queAns.objAns.Id}</span><br/>
												<apex:inputField value="{!queAns.objAns.Answer__c}" rendered="{!queAns.objQues.Type__c == 'Text'}" style="width: 420px;max-width:420px;max-height: 28px;"/>
												<apex:outputPanel rendered="{!queAns.objQues.Type__c == 'Boolean'}">
													<input type="radio" name="address" value="True" onclick="setSelectedAddress(this.value)">True</input>&nbsp;
													<input type="radio" name="address" value="False" onclick="setSelectedAddress(this.value)">False</input>
												</apex:outputPanel>
												<apex:inputField value="{!queAns.objAns.Values__c}" rendered="{!queAns.objQues.Type__c == 'Picklist'}"/>
										</div>
									</td>
								</tr>
								<apex:variable var="i" value="{!i+1}"/>
							</apex:repeat>
							<tr>
								<td><div style="margin-bottom: 28px;"/></td>
							</tr> 
							<apex:variable var="count" value="{!count+1}"/>
						</apex:repeat>
				     </table>
			     </div>
			     <hr/>
			     <input style="margin-left: 289px;" type="button"  class="btn" value="Back to Opp" onclick="backToOppButton()"/>
			     <input style="margin-left: 50px;" type="button"  class="btn" value="Save" onclick="saveAnswerAF();"/>
			</div>		     
		</apex:pageblock>
		</apex:outputpanel>
		<apex:actionfunction name="saveAnswerAF" action="{!saveAnswer}" status="loading" rerender="optId,loading">
<!--     		<apex:param name="index" assignTo="{!rowIndex}" value=""/> -->
    	</apex:actionfunction>
    	<!-- Start - For  Loading symbol  -->
	    <apex:actionstatus id="loading">
	        <apex:facet name="start">
	            <div id="salesforceSource_blurybackground" style="z-index:9999; position:fixed; left:1px; top:1px; width:100%;height:100%; text-align:center; vertical-align: middle; background-color: #dcdcdc; opacity:0.4;filter:alpha(opacity=40)"></div>
	            <div id="ManageMembersViewport_loading" class="waitingSearchDiv" style="width: 100%; height: 100%; display: ''; ">
	                <div style="vertical-align: middle;" class="waitingHolder">
	                    <table align="center" valign="middle" style="width: 100%; height: 30%">
	                        <tr align="center" valign="middle" style="width: 100%; height: 30%">
	                            <td valign="middle">&nbsp;</td>
	                        </tr>
	                    </table> 
	                </div>
	            </div>
	            <div id="ManageMembersViewport_loading" class="waitingSearchDiv" style="width: 100%; height: 100%; display: ''; "></div>
	            <script>document.getElementById('ManageMembersViewport_loading').height = window.innerHeight * (3/4);</script>
	        </apex:facet>
	    </apex:actionstatus>
    <!-- End - For Loading symbol  -->
	</apex:form>
	<script>
		/* Redirect page to respective opportunity detail page onclick of back button  */
		function backToOppButton()
		{
		    window.location.href = '/{!$CurrentPage.parameters.oppId}';  
		}
	</script>
</apex:page>